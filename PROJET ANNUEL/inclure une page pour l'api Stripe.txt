Rumton est un organisme fictif reprÃ©sentant votre client.

inclure une page pour l'api Stripe dans mon powerpoint

cacher les clÃ©s API dans un fichier texte ou json.
pk_test_51RaCSbB0671vfetGyFxCnbmHLV8NVpVrMivQqv7AOCH9JLVW3hPGGnhASaAQg0eGu6snuBXlgF2LNjhBqvYB7TeB00DYhqwP3H

sk_test_51RaCSbB0671vfetGwURJcgE6c3UbM5B2zHTvJ74j1l3HFcsgqKQXvSsdkhlQroq6qE2x4cpQq1da8HpE4Y92S6HM007yyoSh5b

besoin est :
Ajouter le paiement Stripe au moment de lâ€™inscription Ã  une Course
tout en gardant ton approche servlet pur + Thymeleaf, sans framework Spring.

Process Stripe:
- Ajoute la dÃ©pendance Stripe Java dans ton pom.xml
- PrÃ©parer la clÃ© API Stripe
- Ajouter un endpoint pour crÃ©er une PaymentIntent
ğŸ‘‰ Pourquoi ?
Tu ne peux pas mettre le paiement directement dans le HTML : cÃ´tÃ© serveur, il faut d'abord crÃ©er une PaymentIntent pour gÃ©nÃ©rer un client_secret.

- Adapter ton frontend pour :âœ”ï¸ Quand lâ€™utilisateur clique Â«Â SuivantÂ Â» dans ton formulaire,
ğŸ‘‰ appeler ton servlet /create-payment-intent en fetch POST.

âœ”ï¸ Utiliser le client Stripe.js pour traiter la carte

Pour tester stripe:
4242 4242 4242 4242 
CVC : 123

TESTS UNITAIRES
dans le fichier pom.xml, voici la variable qui vous donne le chemin de votre projet Java : ${project.basedir}


Utiliser H2 est un excellent choix pour ton projet sans Spring :

Câ€™est lÃ©ger

Câ€™est embarquÃ© (pas besoin dâ€™un serveur DB Ã  part)

Parfait pour des dÃ©mos ou des tests rapides


Explication :

jdbc:h2:~/color_run_db â†’ crÃ©e un fichier color_run_db.mv.db dans ton HOME

AUTO_SERVER=TRUE â†’ permet Ã  plusieurs processus Java dâ€™y accÃ©der


#commande pour lancer le h2
java -jar "C:\Program Files (x86)\H2\bin\h2-2.3.232.jar"

Il faut crÃ©er le dossier exception et les gÃ©rer

select * from utilisateur;

Je n'ai pas rajouter d'email Ã  l'inscription pour le bien de la planÃ¨te mais j'ai rajoutÃ© pour l'inscription Ã  une course.


Pourquoi BCrypt ?
â€¢ RÃ©sistant au brute-force (coÃ»t configurable)
â€¢ Sel inclus dans le hash (pas de colonne Â« salt Â» Ã  gÃ©rer)
â€¢ ImplÃ©mentation mature, dispo pour Java (lib at.favre.lib:bcrypt)


Le servlet envoie le mot de passe en clair au service, et câ€™est dÃ©sormais UserServiceImpl qui le transforme en hash avant dâ€™enregistrer.




Ce qui se passe

    Servlet rÃ©cupÃ¨re les champs, crÃ©e lâ€™objet User (password encore en clair)
    â†’ aucune logique de sÃ©curitÃ© dans la couche web.

    inscrireAdmin (service) :

        vÃ©rifie lâ€™unicitÃ© de lâ€™e-mail,

        appelle PasswordUtil.hash(password) pour gÃ©nÃ©rer le hash BCrypt,

        passe lâ€™objet (modifiÃ©) au repository.

    Repository stocke le hash dans la colonne password.



Pour lancer le server tomcat

CrÃ©er (ou rouvrir) la configuration Run/Debug

    Run â–¸ Edit Configurationsâ€¦

    Cliquez sur + â–º Tomcat Server â–º Local

        Name : Color-Run (Tomcat)

        Application server : choisis ton Tomcat ajoutÃ© Ã  lâ€™Ã©tape 1.

    Onglet Deployment :

        + â–º Artifact â–º sÃ©lectionne ton WAR exploded
        (color_run:war exploded gÃ©nÃ©rÃ© par Maven/Gradle).

        Contexte : color_run_war_exploded (ou ROOT si tu le dÃ©ploies Ã  la racine).

    Onglet Server (ports) : vÃ©rifie que HTTP port = 8080
    ou celui que tu utilises.

Clique Apply puis OK.
3. Lancer le serveur

    IcÃ´ne verte â–¶ï¸ dans la barre dâ€™outils â€“ sÃ©lectionne ta config
    Color-Run (Tomcat) :
    IntelliJ affiche la console Â« Tomcat started on port(s): 8080 Â».

    Ouvre ton navigateur :

http://localhost:8080/color_run_war_exploded

